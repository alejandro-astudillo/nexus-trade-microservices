
# services/order-engine-csharp/docs/openapi/paths/orders.yaml
orders:
  get:
    tags:
      - Orders
    summary: List Order History
    operationId: GetOrders
    description: Retrieves a paginated list of orders for the authenticated user.
    parameters:
      - name: PageNumber
        in: query
        schema:
          type: integer
          default: 1
      - name: pageSize
        in: query
        schema:
          type: integer
          default: 20
      - name: status
        in: query
        schema:
          $ref: '../components/schemas/enums.yaml#/OrderStatus'
        description: Filter by order status (e.g., FILLED, PENDING).
    responses:
      '200':
        description: List of orders retrieved successfully.
        content:
          application/json:
            schema:
              $ref: '../components/schemas/order.yaml#/OrderListResponse'
      '401':
        $ref: '../components/responses/errors.yaml#/Unauthorized'

  post:
    tags:
      - Orders
    summary: Place a New Order
    operationId: CreateOrder
    description: Validates funds (via Wallet Service) and places a Market or Limit order.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/order.yaml#/CreateOrderRequest'
    responses:
      '201':
        description: Order placed successfully.
        content:
          application/json:
            schema:
              $ref: '../components/schemas/order.yaml#/OrderResponse'
      '400':
        $ref: '../components/responses/errors.yaml#/BadRequest'
      '422':
        $ref: '../components/responses/errors.yaml#/UnprocessableEntity'

orderById:
  parameters:
    - name: orderId
      in: path
      required: true
      schema:
        type: string
        format: uuid
  
  get:
    tags:
      - Orders
    summary: Get Order Details
    operationId: GetOrderById
    responses:
      '200':
        description: Order details.
        content:
          application/json:
            schema:
              $ref: '../components/schemas/order.yaml#/OrderResponse'
      '404':
        $ref: '../components/responses/errors.yaml#/NotFound'

  delete:
    tags:
      - Orders
    summary: Cancel an Order
    operationId: CancelOrder
    description: Cancels an order. Only possible if status is PENDING.
    responses:
      '204':
        description: Order cancelled successfully.
      '400':
        description: Cannot cancel an order that is already filled or rejected.
        content:
          application/json:
            schema:
              $ref: '../components/schemas/order.yaml#/OrderErrorPayload'
      '404':
        $ref: '../components/responses/errors.yaml#/NotFound'