# Base Schema (RFC 7807)
ErrorPayload:
  type: object
  properties:
    type:
      type: string
      format: uri
      example: "https://nexustrade.com/probs/asset-not-found"
      description: A URI reference that identifies the problem type.
    title:
      type: string
      example: "Asset Not Found"
      description: A short, human-readable summary of the problem type.
    status:
      type: integer
      example: 404
      description: The HTTP status code generated by the origin server.
    detail:
      type: string
      example: "The symbol 'BTC-USD' is not currently being tracked."
      description: A human-readable explanation specific to this occurrence of the problem.
    instance:
      type: string
      format: uri
      example: "/prices/BTC-USD"
      description: A URI reference that identifies the specific occurrence of the problem.
    code:
      type: string
      example: "PRC-404"
      description: Internal service specific error code.

# Reusable Responses
BadRequest:
  description: Invalid request format or validation error.
  content:
    application/json:
      schema:
        $ref: '#/ErrorPayload'
      example:
        title: "Bad Request"
        status: 400
        code: "PRC-001"
        detail: "Invalid symbol format. Symbol must be uppercase."

Unauthorized:
  description: Authentication token is missing or invalid.
  content:
    application/json:
      schema:
        $ref: '#/ErrorPayload'

NotFound:
  description: The requested price or asset was not found.
  content:
    application/json:
      schema:
        $ref: '#/ErrorPayload'
      example:
        title: "Not Found"
        status: 404
        code: "PRC-002"
        detail: "Symbol not found in the active tracker."

Conflict:
  description: Resource conflict (e.g. trying to add an asset that is already tracked).
  content:
    application/json:
      schema:
        $ref: '#/ErrorPayload'
      example:
        title: "Asset Already Exists"
        status: 409
        code: "PRC-003"
        detail: "The asset 'ETH-USD' is already active."

InternalServerError:
  description: Critical failure (e.g. External WebSocket disconnection).
  content:
    application/json:
      schema:
        $ref: '#/ErrorPayload'
      example:
        title: "Upstream Error"
        status: 500
        code: "PRC-500"
        detail: "Failed to connect to Binance WebSocket stream."
